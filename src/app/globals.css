@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============================================================================
   COLOR SYSTEM — Semantic only (no raw hex in components)
   Use ONLY: --color-surface, --color-surface-variant, --color-card-bg,
   --color-on-surface, --color-on-surface-variant, --color-primary,
   --color-primary-container, --color-secondary, --color-error, --color-outline,
   --color-divider (soft list/table separators),
   --color-input-bg, --color-placeholder, and *-container / btn-* / badge-* tokens.
   Hierarchy: page = surface-variant; content/sidebar = surface; cards = card-bg.
   Single border rule: one border OR one shadow per section. Focus always visible.
   ============================================================================= */

/* --- Light mode (default) — soft off-whites, no pure white --- */
:root,
[data-theme="light"] {
  /* Swatches */
  --palette-cream: #f5f5f3;
  --palette-warm-gray: #e0e2de;
  --palette-dark: #1c1f24;
  --palette-primary: #2563eb;
  --palette-primary-dark: #1d4ed8;
  --palette-secondary: #0d9488;
  --palette-tertiary: #7c3aed;
  --palette-coral: #e5533d;
  --palette-coral-dark: #cf4632;
  --palette-mint: #2dd4bf;

  /* Semantic (light) — softened, no bright white; control bg distinct from card */
  --color-surface: #f5f5f3;
  --color-surface-variant: #e8eae6;
  --color-on-surface: #1c1f24;
  --color-on-surface-variant: #4a4d52;
  --color-placeholder: #9ca3af;
  --color-input-bg: #e5e5e3;
  --color-outline: #c4c6c3;
  --color-divider: rgba(28, 31, 36, 0.08);

  --color-primary: #2563eb;
  --color-primary-hover: #1d4ed8;
  --color-on-primary: #ffffff;

  /* Nav / highlight container (primary tint) */
  --color-primary-container: #dbeafe;
  --color-on-primary-container: #1e40af;

  /* Secondary accent (links, badges, highlights) */
  --color-secondary: #0d9488;
  --color-secondary-container: #ccfbf1;
  --color-on-secondary: #ffffff;
  --color-on-secondary-container: #134e4a;

  /* Tertiary (optional emphasis) */
  --color-tertiary: #7c3aed;
  --color-tertiary-container: #ede9fe;

  --color-error: #dc2626;
  --color-error-bg: #fef2f2;

  /* Card: soft off-white (not pure #fff) */
  --color-card-bg: #f8f8f6;
  --color-card-text: #1c1f24;

  /* Buttons (light) */
  --color-btn-primary-bg: #2563eb;
  --color-btn-primary-bg-hover: #1d4ed8;
  --color-btn-primary-text: #ffffff;
  --color-btn-secondary-bg: #e8eae6;
  --color-btn-secondary-bg-hover: #d4d6d3;
  --color-btn-secondary-text: #1c1f24;
  --color-btn-danger-bg: #dc2626;
  --color-btn-danger-bg-hover: #b91c1c;
  --color-btn-danger-text: #ffffff;
  --color-badge-success-bg: #2dd4bf;
  --color-badge-success-text: #134e4a;

  --header-height: 56px;
  --radius: 8px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-pill: 9999px;
  --transition-fast: 150ms;
  --transition-normal: 200ms;
  --shadow-sm: 0 1px 2px 0 rgb(28 31 36 / 8%), 0 1px 3px 1px rgb(28 31 36 / 6%);
  --shadow-md: 0 1px 3px 0 rgb(28 31 36 / 10%), 0 4px 8px 3px rgb(28 31 36 / 8%);
}

/* --- Dark mode (system or data-theme) --- */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --color-surface: #1c1f24;
    --color-surface-variant: #262a31;
    --color-on-surface: #f4f4f5;
    --color-on-surface-variant: #a1a1aa;
    --color-placeholder: #3d414a;
    --color-input-bg: #252830;
    --color-outline: #3f3f46;
    --color-divider: rgba(255, 255, 255, 0.06);

    --color-primary: #60a5fa;
    --color-primary-hover: #93c5fd;
    --color-on-primary: #1e3a8a;

    --color-primary-container: #1e3a8a;
    --color-on-primary-container: #bfdbfe;

    --color-secondary: #2dd4bf;
    --color-secondary-container: #134e4a;
    --color-on-secondary: #134e4a;
    --color-on-secondary-container: #99f6e4;

    --color-tertiary: #a78bfa;
    --color-tertiary-container: #4c1d95;

    --color-error: #f87171;
    --color-error-bg: rgba(248, 113, 113, 0.18);

    --color-card-bg: #2d3036;
    --color-card-text: #f4f4f5;

    --color-btn-primary-bg: #3b82f6;
    --color-btn-primary-bg-hover: #60a5fa;
    --color-btn-primary-text: #ffffff;
    --color-btn-secondary-bg: #3f3f46;
    --color-btn-secondary-bg-hover: #52525b;
    --color-btn-secondary-text: #f4f4f5;
    --color-btn-danger-bg: #dc2626;
    --color-btn-danger-bg-hover: #ef4444;
    --color-btn-danger-text: #ffffff;
    --color-badge-success-bg: #2dd4bf;
    --color-badge-success-text: #134e4a;

    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 24%), 0 1px 3px 1px rgb(0 0 0 / 18%);
    --shadow-md: 0 1px 3px 0 rgb(0 0 0 / 24%), 0 4px 8px 3px rgb(0 0 0 / 18%);
  }
}

/* Manual dark theme (when data-theme="dark" is set on html) */
[data-theme="dark"] {
  --color-surface: #1c1f24;
  --color-surface-variant: #262a31;
  --color-on-surface: #f4f4f5;
  --color-on-surface-variant: #a1a1aa;
  --color-placeholder: #3d414a;
  --color-input-bg: #252830;
  --color-outline: #3f3f46;
  --color-divider: rgba(255, 255, 255, 0.06);

  --color-primary: #60a5fa;
  --color-primary-hover: #93c5fd;
  --color-on-primary: #1e3a8a;

  --color-primary-container: #1e3a8a;
  --color-on-primary-container: #bfdbfe;

  --color-secondary: #2dd4bf;
  --color-secondary-container: #134e4a;
  --color-on-secondary-container: #99f6e4;

  --color-tertiary: #a78bfa;
  --color-tertiary-container: #4c1d95;

  --color-error: #f87171;
  --color-error-bg: rgba(248, 113, 113, 0.18);

  --color-card-bg: #27272a;
  --color-card-text: #f4f4f5;

  --color-btn-primary-bg: #3b82f6;
  --color-btn-primary-bg-hover: #60a5fa;
  --color-btn-primary-text: #ffffff;
  --color-btn-secondary-bg: #3f3f46;
  --color-btn-secondary-bg-hover: #52525b;
  --color-btn-secondary-text: #f4f4f5;
  --color-btn-danger-bg: #dc2626;
  --color-btn-danger-bg-hover: #ef4444;
  --color-btn-danger-text: #ffffff;
  --color-badge-success-bg: #2dd4bf;
  --color-badge-success-text: #134e4a;

  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 24%), 0 1px 3px 1px rgb(0 0 0 / 18%);
  --shadow-md: 0 1px 3px 0 rgb(0 0 0 / 24%), 0 4px 8px 3px rgb(0 0 0 / 18%);
}

/* Manual light theme override (force light even in dark system preference) */
[data-theme="light"] {
  --color-surface: #f5f5f3;
  --color-surface-variant: #e8eae6;
  --color-on-surface: #1c1f24;
  --color-on-surface-variant: #4a4d52;
  --color-placeholder: #9ca3af;
  --color-input-bg: #e5e5e3;
  --color-outline: #c4c6c3;
  --color-divider: rgba(28, 31, 36, 0.08);
  --color-primary: #2563eb;
  --color-primary-hover: #1d4ed8;
  --color-on-primary: #ffffff;
  --color-primary-container: #dbeafe;
  --color-on-primary-container: #1e40af;
  --color-secondary: #0d9488;
  --color-secondary-container: #ccfbf1;
  --color-tertiary: #7c3aed;
  --color-tertiary-container: #ede9fe;
  --color-error: #dc2626;
  --color-error-bg: #fef2f2;
  --color-card-bg: #f8f8f6;
  --color-card-text: #1c1f24;
  --color-btn-primary-bg: #2563eb;
  --color-btn-primary-bg-hover: #1d4ed8;
  --color-btn-primary-text: #ffffff;
  --color-btn-secondary-bg: #e8eae6;
  --color-btn-secondary-bg-hover: #d4d6d3;
  --color-btn-secondary-text: #1c1f24;
  --color-btn-danger-bg: #dc2626;
  --color-btn-danger-bg-hover: #b91c1c;
  --color-btn-danger-text: #ffffff;
  --color-badge-success-bg: #2dd4bf;
  --color-badge-success-text: #134e4a;
  --shadow-sm: 0 1px 2px 0 rgb(28 31 36 / 8%), 0 1px 3px 1px rgb(28 31 36 / 6%);
  --shadow-md: 0 1px 3px 0 rgb(28 31 36 / 10%), 0 4px 8px 3px rgb(28 31 36 / 8%);
}

/* =============================================================================
   ELEMENT TOKENS (use palette variables so they respect light/dark)
   ============================================================================= */
@layer components {
  /* Buttons: border like nav items, 12px radius, consistent size/color, 200ms transitions */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-medium transition-colors disabled:opacity-50;
    border: 1px solid var(--color-outline);
    border-radius: var(--radius-md);
    transition-duration: var(--transition-normal);
    min-height: 2.25rem; /* 36px base */
  }
  .btn-md {
    @apply px-4 py-2.5 text-sm;
    min-height: 2.5rem; /* 40px */
  }
  .btn-sm {
    @apply px-3 py-1.5 text-sm;
    min-height: 2rem; /* 32px */
  }

  /* Circular icon-only buttons (same semantics as .btn, use with .btn-primary etc.) */
  .btn-icon {
    width: 2rem;
    height: 2rem;
    min-width: 2rem;
    min-height: 2rem;
    padding: 0;
    border-radius: 9999px;
  }

  .btn-primary {
    background-color: var(--color-btn-primary-bg);
    color: var(--color-btn-primary-text);
    border-color: var(--color-btn-primary-bg-hover);
  }
  .btn-primary:hover:not(:disabled) {
    background-color: var(--color-btn-primary-bg-hover);
  }

  .btn-secondary {
    background-color: var(--color-btn-secondary-bg);
    color: var(--color-btn-secondary-text);
    border-color: var(--color-outline);
  }
  .btn-secondary:hover:not(:disabled) {
    background-color: var(--color-btn-secondary-bg-hover);
  }

  .btn-danger {
    background-color: var(--color-btn-danger-bg);
    color: var(--color-btn-danger-text);
    border-color: var(--color-btn-danger-bg-hover);
  }
  .btn-danger:hover:not(:disabled) {
    background-color: var(--color-btn-danger-bg-hover);
  }

  /* Badges/tags: pill style */
  .badge-success {
    @apply inline-flex items-center px-2.5 py-0.5 text-sm font-medium;
    border-radius: var(--radius-pill);
    background-color: var(--color-badge-success-bg);
    color: var(--color-badge-success-text);
  }

  /* Cards: 8–12px radius, single subtle border, 16–20px padding when used */
  .card {
    border: 1px solid var(--color-outline);
    border-radius: var(--radius-md);
    background-color: var(--color-card-bg);
    color: var(--color-card-text);
  }
  /* Soft divider for table rows / list separators (no harsh lines) */
  .divider-subtle {
    border-color: var(--color-divider);
  }

  /* Base input style: 12px radius, min-height 40px, clear focus */
  .input-base {
    width: 100%;
    min-height: 2.5rem;
    border: 1px solid var(--color-outline);
    border-radius: var(--radius-md);
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    color: var(--color-on-surface);
    background-color: var(--color-input-bg);
    transition: border-color var(--transition-normal), box-shadow var(--transition-normal);
  }
  .input-base::placeholder {
    color: var(--color-placeholder);
  }
  .input-base:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 2px var(--color-primary-container);
  }
}

@layer base {
  body {
    font-family: var(--font-roboto), "Roboto", system-ui, sans-serif;
    color: var(--color-on-surface);
    background: var(--color-surface-variant);
    -webkit-font-smoothing: antialiased;
    line-height: 1.5;
  }

  h1 {
    @apply text-2xl font-semibold tracking-tight text-[var(--color-on-surface)];
    line-height: 1.3;
  }
  h2 {
    @apply text-xl font-semibold tracking-tight text-[var(--color-on-surface)];
    line-height: 1.35;
  }
  h3 {
    @apply text-lg font-medium text-[var(--color-on-surface)];
    line-height: 1.4;
  }
  p {
    @apply text-[var(--color-on-surface-variant)];
    line-height: 1.55;
  }
}

/* Focus = same design as selected nav item (primary border + primary-container glow) */
input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px var(--color-primary-container);
  transition: border-color var(--transition-normal), box-shadow var(--transition-normal);
}

button:focus-visible,
a:focus-visible {
  outline: none;
  border-color: var(--color-primary) !important;
  box-shadow: 0 0 0 2px var(--color-primary-container);
  transition: border-color var(--transition-normal), box-shadow var(--transition-normal);
}

/* Placeholder text — dim so it reads as hint (e.g. "e.g. …") */
::placeholder {
  color: var(--color-placeholder);
}

/* Empty text box background (inputs, textareas, selects) */
input,
textarea,
select {
  background-color: var(--color-input-bg);
}

/* Date/datetime inputs: same height as other controls; ensure value is visible (browsers can use faint system styles) */
input[type="date"],
input[type="datetime-local"],
input[type="time"] {
  color: var(--color-on-surface);
  height: 2.5rem;
  box-sizing: border-box;
}
input[type="date"]::placeholder,
input[type="datetime-local"]::placeholder,
input[type="time"]::placeholder {
  color: var(--color-placeholder);
}
